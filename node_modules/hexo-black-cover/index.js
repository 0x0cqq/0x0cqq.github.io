var onclick_event = "if (/(iPhone|iPad|iPod|iOS|Android)/i.test(navigator.userAgent)) {this.style.background=\'none\';}";
var title = "你知道的太多了";

hexo.extend.tag.register('black', function (args) {
  var splited = args.join(' ').split('|');
  var text = splited[0].trim();

  if (splited.length > 1) {
    title = splited[1].trim();
  }

  var result = '<span class="heimu" title="' + title + '" onclick=' + onclick_event + '>' + text + '</span>';

  return result;
});

hexo.extend.tag.register('rubyb', function (args) {
  var splited = args.join(' ').split('|');
  var origin = splited[0].trim();
  var ruby = origin;

  if (splited.length > 1) {
    ruby = splited[1].trim();
  }

  var result = '<ruby>' + origin + '<rp> (</rp><rt><span class="heimu" title="' + title + '" onclick=' + onclick_event + '>' + ruby + '</span></rt><rp>) </rp></ruby>';

  return result;
});

hexo.extend.tag.register('done', function (args) {
  return "<input type='checkbox' onclick='return false;' checked>";
});

hexo.extend.tag.register('todo', function (args) {
  return "<input type='checkbox' onclick='return false;'>";
});

// register heimu

var css = " <style type=\"text/css\">         \
              span.heimu {                    \
                color: #252525;               \
                background - color: #252525;  \
              }                               \
              span.heimu:hover {              \
                color: white;                 \
              }                               \
            </style > ";

hexo.extend.filter.register('after_render:html', function (str, data) {

  if (str.indexOf("span class=\"heimu\"") != -1)
    str = str.replace(/<\s*\/\s*head\s*>/i, css + "</head>");

  return str;
});
